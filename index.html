<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
	<title>Pound Cake</title>

	<script type="text/javascript" src="http://code.createjs.com/createjs-2013.12.12.min.js"></script>
	<script>
		var KEYCODE_LEFT = 37, 
			KEYCODE_RIGHT = 39,
			KEYCODE_UP = 38, 
			KEYCODE_DOWN = 40;
		var ellip = new createjs.Bitmap('cake.png');
		
		/*Keyboard input handlers - keydown and keyup*/
		var left,
			right,
			up,
			down;

		function keyPressed(event){
			if(!event){ var event = window.event; }
			switch(event.keyCode){
				case KEYCODE_LEFT: 
					console.log("left held");
					left = true;
					break;
				case KEYCODE_RIGHT: 
					console.log("right held");
					right = true; 
					break;
				case KEYCODE_UP: 
					console.log("up held");
					up = true;
					break;
				case KEYCODE_DOWN: 
					console.log("down held");
					down = true;
					break;          
			}
		}

		function keyUp(event){
			if(!event){ var event = window.event; }
			switch(event.keyCode){
				case KEYCODE_LEFT: 
					console.log("left released");
					left = false;
					break;
				case KEYCODE_RIGHT: 
					console.log("right released");
					right = false; 
					break;
				case KEYCODE_UP: 
					console.log("up released");
					up = false;
					break;
				case KEYCODE_DOWN: 
					console.log("down released");
					down = false;
					break;          
			}
		}
		
		function Main(){
			/*Link Canvas*/
			var stage = new createjs.Stage('demoCanvas');
			
			/*Image initialization*/
			stage.addChild(ellip);
			
			/*Connecting keydown input to keyPressed handler*/
			this.document.onkeydown = keyPressed;
			/*Connecting key up event to keyUp handler*/
			this.document.onkeyup = keyUp;
			
			/*Continually updating the stage*/
			createjs.Ticker.addEventListener('tick',handleTick);
			
			function handleTick(event){
			   /*Scaling down the image*/
				ellip.scaleX = 0.10;
				ellip.scaleY = 0.10;

				if(left) {
					ellip.x -= 5;
				} else if(right) {
					ellip.x += 5;
				}

				if(up) {
					ellip.y -= 5;
				} else if(down) {
					ellip.y += 5;
				}

				if (ellip.x > stage.canvas.width) { 
					ellip.x = stage.canvas.width; 
				}   
				stage.update();
			}
		}
	</script>
</head>

<body onload="Main();">
<div class="canvasHolder">
	<canvas style="width:100%;height:100%;"id="demoCanvas"></canvas>
</div>
</body>
</html>
